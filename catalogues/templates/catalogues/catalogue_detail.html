{% extends "baselayout.html" %}
{% load i18n %}
{% load dictionary_lookup %}

{% block content %}

<div class="row">
    <div class="col-xs-10">
        <h1>Catalogue detail</h1>
        <dl class="dl-horizontal">
            <dt>{% trans "Short title" %}</dt>
            <dd>{{ object.short_title }}</dd>

            <dt>{% trans "Year of publication" %}</dt>
            <dd>{{ object.year_of_publication }}</dd>

            <dt>{% trans "Full title" %}</dt>
            <dd>{{ object.full_title }}</dd>

            <dt>{% trans "Preface and paratexts" %}</dt>
            <dd>{{ object.preface_and_paratexts }}</dd>

            <dt>{% trans "Notes" %}</dt>
            <dd>{{ object.notes }}</dd>

            <dt>{% trans "Scans" %}</dt>
            <dd>
                {% for scan in object.transcription.scans.all %}
                    <a href="{{ scan.scan.url }}">{{ scan.scan.name }}</a>
                {% endfor %}
            </dd>
        </dl>
        {% for lot in object.lot_set.all %}
            {% if lot.index_in_catalogue in first_lot_on_page_dict %}
                <hr/>
                <b>Page {{ first_lot_on_page_dict|lookup:lot.index_in_catalogue }}</b>
            {% endif %}
            {% if lot.number_in_catalogue == "1" %}
                <br/>
                <h4><i>{{ lot.bookseller_category_books }}</i></h4>
            {% endif %}
            <p><b>{{ lot.number_in_catalogue }}</b> {{ lot }} <i>{{ lot.sales_price }}</i></p>
        {% endfor %}
    </div>
    <div class="col-xs-2">
        <h3>Actions</h3>
        <div class="list-group">
            <a class="list-group-item" href="{% url 'change_catalogue' object.pk %}">Edit this catalogue</a>
            <a class="list-group-item" href="" data-toggle="modal" data-target="#deleteModal">Delete this catalogue</a>
            <a class="list-group-item" href="{% url 'add_catalogue' %}">Create new catalogue</a>
        </div>
    </div>
</div>

<!-- Delete Modal -->
<div id="deleteModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title"><span class="glyphicon glyphicon-warning-sign"></span> {% trans "Warning" %}</h4>
      </div>
      <div class="modal-body">
        <p>{% trans "Are you sure you want to delete this catalogue?" %}</p>
      </div>
      <div class="modal-footer">
        <a class="btn btn-danger" href="{% url 'delete_catalogue' object.pk %}">{% trans "Yes" %}</a>
        <button type="button" class="btn btn-success" data-dismiss="modal">{% trans "No" %}</button>
      </div>
    </div>

  </div>
</div>

{% endblock %}